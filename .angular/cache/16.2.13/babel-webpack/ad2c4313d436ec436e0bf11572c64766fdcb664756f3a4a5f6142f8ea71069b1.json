{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { BookType } from 'src/app/interfaces/book';\nlet BooksComponent = class BooksComponent {\n  constructor(bookService, cartService, wishlistServie, router) {\n    this.bookService = bookService;\n    this.cartService = cartService;\n    this.wishlistServie = wishlistServie;\n    this.router = router;\n    this.books = [];\n    this.bookTypeOptions = Object.values(BookType);\n    this.selectedBookType = '';\n    this.cartId = null;\n    this.wishlistId = null;\n  }\n  ngOnInit() {\n    this.loadAllBooks();\n    this.bookService.getAllBooks().subscribe(books => {\n      this.books = books;\n    }, error => {\n      console.error('Error retrieving books:', error);\n    });\n    this.cartService.getMyCart().subscribe(cart => {\n      this.cartId = cart.id;\n    }, error => {\n      console.error('Error fetching cart', error);\n    });\n    this.wishlistServie.getMyWishlist().subscribe(wishlist => {\n      this.wishlistId = wishlist.id;\n    }, error => {\n      console.error('Error fetching wishlist', error);\n    });\n  }\n  loadAllBooks() {\n    this.bookService.getAllBooks().subscribe(books => {\n      this.books = books;\n    }, error => {\n      console.error('Error retrieving books:', error);\n    });\n  }\n  filterBooksByType() {\n    if (this.selectedBookType) {\n      this.bookService.getBooksByType(this.selectedBookType).subscribe(books => {\n        this.books = books;\n      }, error => {\n        console.error('Error retrieving books by type:', error);\n      });\n    } else {\n      this.loadAllBooks();\n    }\n  }\n  addToCart(book) {\n    if (this.cartId === null) {\n      console.error('Cart ID is not available. Unable to add book to cart.');\n      return;\n    }\n    const bookId = book.id;\n    this.cartService.addBookToCart(this.cartId, bookId).subscribe(response => {\n      console.log('Cart updated successfully:', response);\n      this.router.navigate(['/cart']);\n    }, error => {\n      console.error('An error occurred while adding book to cart:', error);\n    });\n  }\n  addToWislist(book) {\n    if (this.wishlistId === null) {\n      console.error('Cart ID is not available. Unable to add book to wishlist.');\n      return;\n    }\n    const bookId = book.id;\n    this.wishlistServie.addBookToWishlist(this.wishlistId, bookId).subscribe(response => {\n      console.log('Wishlist updated successfully:', response);\n      this.router.navigate(['/wishlist']);\n    }, error => {\n      console.error('An error occurred while adding book to wishlist:', error);\n    });\n  }\n};\nBooksComponent = __decorate([Component({\n  selector: 'app-books',\n  templateUrl: './books.component.html',\n  styleUrls: ['./books.component.scss']\n})], BooksComponent);\nexport { BooksComponent };","map":{"version":3,"names":["Component","BookType","BooksComponent","constructor","bookService","cartService","wishlistServie","router","books","bookTypeOptions","Object","values","selectedBookType","cartId","wishlistId","ngOnInit","loadAllBooks","getAllBooks","subscribe","error","console","getMyCart","cart","id","getMyWishlist","wishlist","filterBooksByType","getBooksByType","addToCart","book","bookId","addBookToCart","response","log","navigate","addToWislist","addBookToWishlist","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Alina\\Desktop\\library\\src\\app\\components\\books\\books.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Book, BookType } from 'src/app/interfaces/book';\nimport { BookService } from 'src/app/services/book/book.service';\nimport { CartService } from 'src/app/services/cart/cart.service';\nimport { WishlistService } from 'src/app/services/wishlist/wishlist.service';\n\n@Component({\n  selector: 'app-books',\n  templateUrl: './books.component.html',\n  styleUrls: ['./books.component.scss']\n})\nexport class BooksComponent implements OnInit{\n\n  books: Book[] = [];\n  bookTypeOptions: string[] = Object.values(BookType);\n  selectedBookType: BookType | '' = '';\n  cartId: number | null = null;\n  wishlistId: number | null = null;\n  \n\n  constructor(\n    private bookService: BookService,\n    private cartService: CartService,\n    private wishlistServie: WishlistService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n\n    this.loadAllBooks();\n    this.bookService.getAllBooks().subscribe(\n      (books: Book[]) => {\n        this.books = books;\n      },\n      (error) => {\n        console.error('Error retrieving books:', error);\n      }\n    );\n\n    this.cartService.getMyCart().subscribe(\n      (cart) => {\n        this.cartId = cart.id;\n      },\n      (error) => {\n        console.error('Error fetching cart', error);\n      }\n    );\n\n    this.wishlistServie.getMyWishlist().subscribe(\n      (wishlist) => {\n        this.wishlistId = wishlist.id;\n      },\n      (error) => {\n        console.error('Error fetching wishlist', error);\n      }\n    );\n  }\n  loadAllBooks(): void {\n    this.bookService.getAllBooks().subscribe(\n      (books: Book[]) => {\n        this.books = books;\n      },\n      (error) => {\n        console.error('Error retrieving books:', error);\n      }\n    );\n  }\n  filterBooksByType(): void {\n    if (this.selectedBookType) {\n      this.bookService.getBooksByType(this.selectedBookType).subscribe(\n        (books: Book[]) => {\n          this.books = books;\n        },\n        (error) => {\n          console.error('Error retrieving books by type:', error);\n        }\n      );\n    } else {\n      this.loadAllBooks();\n    }\n  }\n\n  addToCart(book: Book): void {\n    if (this.cartId === null) {\n      console.error('Cart ID is not available. Unable to add book to cart.');\n      return;\n    }\n\n    const bookId: number = book.id;\n\n    this.cartService.addBookToCart(this.cartId, bookId).subscribe(\n      response => {\n        console.log('Cart updated successfully:', response);\n        this.router.navigate(['/cart']);\n      },\n      error => {\n        console.error('An error occurred while adding book to cart:', error);\n      }\n    );\n  }\n\n  addToWislist(book: Book): void {\n    if (this.wishlistId === null) {\n      console.error('Cart ID is not available. Unable to add book to wishlist.');\n      return;\n    }\n\n    const bookId: number = book.id;\n\n    this.wishlistServie.addBookToWishlist(this.wishlistId, bookId).subscribe(\n      response => {\n        console.log('Wishlist updated successfully:', response);\n        this.router.navigate(['/wishlist']);\n      },\n      error => {\n        console.error('An error occurred while adding book to wishlist:', error);\n      }\n    );\n  }\n}\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}